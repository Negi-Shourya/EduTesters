<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTesters | JEE Main Test Series</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #0d47a1; --secondary: #2e7d32; --bg-color: #f5f8ff; --text-main: #222; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg-color); color: var(--text-main); display: flex; flex-direction: column; min-height: 100vh; }
        
        header { background: #fff; padding: 12px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.08); position: sticky; top: 0; z-index: 1000; }
        .nav-left { display: flex; align-items: center; gap: 20px; }
        .menu-btn { font-size: 1.6rem; cursor: pointer; color: var(--primary); }
        header h1 { margin: 0; color: var(--primary); font-size: 1.8rem; }
        
        #userDisplay { display: flex; align-items: center; gap: 10px; font-weight: 600; color: var(--primary); }
        .user-pic { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--primary); }

        /* Sidebar & Overlay */
        .side-drawer { position: fixed; top: 0; left: -300px; width: 280px; height: 100%; background: #fff; box-shadow: 5px 0 15px rgba(0,0,0,0.1); transition: 0.3s ease; z-index: 2000; padding-top: 20px; }
        .side-drawer.active { left: 0; }
        .drawer-item { padding: 15px 25px; display: flex; align-items: center; gap: 15px; text-decoration: none; color: var(--text-main); font-weight: 500; }
        .drawer-item:hover { background: #e3f2fd; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); display: none; z-index: 1500; }
        .overlay.active { display: block; }

        /* Cards */
        .main-content { flex: 1; max-width: 1100px; margin: auto; padding: 40px 20px; width: 100%; box-sizing: border-box; text-align: center; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-top: 30px; }
        .card { background: #fff; padding: 40px 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.06); }
        .old-price { text-decoration: line-through; color: #888; font-size: 1rem; }
        .price { font-size: 2rem; font-weight: 700; color: var(--text-main); margin: 10px 0; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .btn-blue { background: var(--primary); color: #fff; }
        .btn-green { background: var(--secondary); color: #fff; }

        /* Payment Modal */
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 20px; box-shadow: 0 0 50px rgba(0,0,0,0.3); z-index: 3000; width: 90%; max-width: 400px; text-align: center; }
        .modal h2 { color: var(--primary); margin-top: 0; }
        .modal input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        
        footer { background: #fff; padding: 30px; text-align: center; box-shadow: 0 -4px 12px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<div class="side-drawer" id="sideDrawer">
    <div style="padding: 20px; border-bottom: 1px solid #eee;"><h3>EduTesters Menu</h3></div>
    <a href="profile.html" class="drawer-item"><i class="fas fa-user-circle"></i> My Profile</a>
    <a href="#" class="drawer-item" onclick="logout()" id="sidebarLogout" style="display:none;"><i class="fas fa-sign-out-alt"></i> Logout</a>
</div>

<header>
    <div class="nav-left">
        <div class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        <h1>EduTesters</h1>
    </div>
    <div id="authArea">
        <div id="googleBtn"></div>
        <div id="userDisplay" style="display:none;"></div>
    </div>
</header>

<div class="main-content">
    <p>JEE Main Online Test Series & Preparation</p>
    <div class="card-grid">
        <div class="card">
            <h2>Starters (Free)</h2>
            <div class="price">‚Çπ0</div>
            <button class="btn btn-blue" onclick="openFreeTests()">Access Free Tests</button>
        </div>

        <div class="card" id="rankBoosterCard">
            <h2>Rank Boosters</h2>
            <div id="priceDisplay">
                <span class="old-price">‚Çπ5999</span>
                <div class="price">‚Çπ3999</div>
            </div>
            <button class="btn btn-green" id="buyBtn" onclick="openPaymentModal()">Buy Now</button>
        </div>
    </div>
</div>

<div class="modal" id="paymentModal">
    <h2>Complete Payment</h2>
    <p>Price: <span id="modalPrice">‚Çπ3999</span></p>
    
    <input type="text" id="couponCode" placeholder="Enter Coupon Code">
    <button class="btn btn-blue" style="margin-top:0" onclick="applyCoupon()">Apply Coupon</button>
    
    <div style="margin: 20px 0; background: #f0f4ff; padding: 15px; border-radius: 10px;">
        <p style="margin:0; font-size: 0.9rem;">UPI ID: <b>sumitsafe2706@okhdfcbank</b></p>
        <p style="font-size: 0.8rem; color: #666;">Pay the amount and click verify below.</p>
    </div>

    <button class="btn btn-green" onclick="verifyPayment()">Verify & Unlock Automatically</button>
    <button class="btn" onclick="closeModal()" style="background:#eee;">Cancel</button>
</div>

<footer>
    <p>¬© 2026 EduTesters. All Rights Reserved.</p>
    <p>üìû 7876720376 | ‚úâÔ∏è negishourya1980@gmail.com</p>
</footer>

<script src="https://accounts.google.com/gsi/client" async defer></script>
<script>
    function toggleMenu() { document.getElementById('sideDrawer').classList.toggle('active'); document.getElementById('overlay').classList.toggle('active'); }
    function closeModal() { document.getElementById('paymentModal').style.display = "none"; document.getElementById('overlay').classList.remove('active'); }

    // Coupon Logic
    let currentPrice = 3999;
    function applyCoupon() {
        const code = document.getElementById("couponCode").value;
        if (code === "Jee2k26") {
            currentPrice = 1;
            document.getElementById("modalPrice").innerText = "‚Çπ1";
            alert("Coupon Applied! Price is now ‚Çπ1");
        } else {
            alert("Invalid Coupon Code");
        }
    }

    // Payment Logic
    function openPaymentModal() {
        if (localStorage.getItem("userLoggedIn") !== "true") {
            alert("Please login first to purchase.");
            return;
        }
        document.getElementById('paymentModal').style.display = "block";
        document.getElementById('overlay').classList.add('active');
    }

    function verifyPayment() {
        // In a real app, you'd check a backend API here.
        alert("Payment Verified! Rank Booster Unlocked.");
        localStorage.setItem("rankBoosterUnlocked", "true");
        closeModal();
        updateUI();
    }

    // Standard Google Login / UI functions
    function decodeJwt(token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        return JSON.parse(window.atob(base64));
    }

    function initializeGoogleLogin() {
        google.accounts.id.initialize({
            client_id: "207841444142-pdts1e362dv8hh8v7ro8itj9fdo3rm30.apps.googleusercontent.com",
            callback: (response) => {
                const data = decodeJwt(response.credential);
                localStorage.setItem("userLoggedIn", "true");
                localStorage.setItem("userName", data.name);
                localStorage.setItem("userEmail", data.email);
                localStorage.setItem("userPic", data.picture);
                updateUI();
            }
        });
        google.accounts.id.renderButton(document.getElementById("googleBtn"), { theme: "outline", size: "large", shape: "pill" });
    }

    function updateUI() {
        const isLoggedIn = localStorage.getItem("userLoggedIn") === "true";
        if (isLoggedIn) {
            document.getElementById("googleBtn").style.display = "none";
            const userDisplay = document.getElementById("userDisplay");
            userDisplay.style.display = "flex";
            userDisplay.innerHTML = `<img src="${localStorage.getItem('userPic')}" class="user-pic"> <span>${localStorage.getItem('userName')}</span>`;
            document.getElementById("sidebarLogout").style.display = "flex";
        }

        // Check if Booster is unlocked
        if (localStorage.getItem("rankBoosterUnlocked") === "true") {
            document.getElementById("priceDisplay").innerHTML = "<div class='price' style='color:green'>UNLOCKED ‚úì</div>";
            const buyBtn = document.getElementById("buyBtn");
            buyBtn.innerText = "Access Rank Booster";
            buyBtn.onclick = () => window.location.href = "rank-booster-tests.html";
        }
    }

    function openFreeTests() {
        if (localStorage.getItem("userLoggedIn") === "true") window.location.href = "free-tests.html";
        else alert("Please login first!");
    }

    function logout() { localStorage.clear(); location.reload(); }
    window.onload = () => { setTimeout(initializeGoogleLogin, 300); updateUI(); };
</script>
</body>
</html>
